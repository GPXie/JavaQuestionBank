# 14.Java与数据库

## 一、单选

- 题目说明：

​       题目难度：

​       题目考核知识点：Java与数据库

​       答案：

​       题目解析：





## 二、多选



## 三、填空

### 程序填空

- 题目说明：以下应用程序在数据库中删除一条数据，使用Statement对象执行SQL语句（从表stu中删除学号为0001的记录）。源代码如下：

  ```java
  import java.sql.Connection;
  import java.sql.DriverManager;
  import java.sql.SQLException;
  import java.sql.Statement;
  public class DeleteData {
  	public static void main(String[] args) {
  		String driver="com.mysql.jdbc.Driver";
  		String url="jdbc:mysql://localhost:3306/Student";
  		String username="root";
  		String password="";
  		try{
  		     __________________;//加载驱动程序
  		}catch(Exception e) {
  			System.out.println("无法加载驱动程序!");
  		}
  		try {
  			Connection conn=DriverManager.getConnection(url,username,password);
  			Statement st=conn.createStatement();
  			————————————————;//删除数据
  			System.out.println("记录删除成功!");
  			st.close();
  			conn.close();
  		}catch(SQLException e) {
  			System.out.println("数据库连接失败!");
  		}
  		
  	}
  }
  ```
  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：Class.forName(driver)；st.executeUpdate("delete from stu where sno=0001")

​       题目解析：执行删除操作，应使用executeUpdate()方法





- 题目说明：以下应用程序在数据库中插入一条数据，使用PreparedStatement对象执行SQL语句。代码如下：

  ```java
  public int insertStudent(StudentDO stu) throws SQLException {
  		Connection conn = DBUtil.getConnection();
  		String sql="insert into student values(?,?,?,?)";
  		PreparedStatement ps = ————————————————————————;
  		ps.setString(1, stu.getSno());
  		ps.setString(2, stu.getName());
  		————————————————————————;//年龄:int
  		ps.setString(4, stu.getPasswd());
  		return ps.executeUpdate();
  	}
  ```

  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：conn.prepareStatement(sql)；ps.setInt(3, stu.getAge())

​       题目解析：使用PreparedStatement对象执行的是动态的SQL语句，将编译保存在PreparedStatement实例中。使用?来防止SQL注入的问题。在为?设置值时要设置成该属性对应的类型。





- 题目说明：通过name的模糊查询在数据库中找到某条记录。代码如下：

  ```java
  public ArrayList<StudentDO> queryStudent(String name) throws SQLException {
  		Connection conn = DBUtil.getConnection();
  		String sql=————————————————————————;
  		PreparedStatement ps = conn.prepareStatement(sql);
  		————————————————————————————————;
  		ResultSet rs=————————————————————————;
  		ArrayList<StudentDO> list=new ArrayList<>();
  		while(rs.next()){
  			StudentDO stu=new StudentDO(rs.getString(1),
  					rs.getString(2),rs.getInt(3),rs.getString(4));
  			list.add(stu);
  		}
  		return list;
  	}
  ```

  

​       题目难度：中等

​       题目考核知识点：Java与数据库

​       答案："select * from student where name like ?"；ps.setString(1, "%" + name + "%")；ps.executeQuery()                        

​       题目解析：模糊查询时使用like来匹配并且在设置?值时要使用 "%" + name + "%"的方式。执行查询语句时应调用executeQuery()方法。



- 题目说明：通过查询auction表中所有的数据并返回一个List集合。代码如下：

  ```java
  public ArrayList<Auction> getAll() throws SQLException {
  		ArrayList<Auction> list = new ArrayList<Auction>();
  		String sql = "select * from auction";
  		Connection conn = DBUtil.getConnection();
  		PreparedStatement ps = conn.prepareStatement(sql);
  		ResultSet rs = ——————————————————————————;
  		while (————————) {
  			String id = rs.getString("id");
  			String title = rs.getString("title");
  			String desc = rs.getString("description");
  			double price = rs.getDouble("price");
  			int count = rs.getInt("count");
  			Auction auc = new Auction(id, title, desc, price, count);
  
  			————————————————————————————————
  		}
  		return list;
  	}
  ```

  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：ps.executeQuery()；rs.next()；list.add(auc);

​       题目解析：ps.executeQuery()会返回一个ResultSet结果集，ResultSet实例具有指向当前数据行指针的作用，指针的初始位置置于第一条记录的前面，通过next()方法将指针下移。



### 读程序写结果

- 题目说明：有一个users表，表中有两个字段，分别为id:int，name:varchar。表中有三条数据：1   wangwu；3   tom；5    xiaohong。部分代码如下，写出输出结果。

  ```java
  import java.sql.Connection;  
  import java.sql.DriverManager;  
  import java.sql.*;  
    
  public class MySql {  
      public static void main(String[] args) throws Exception {  
          Connection conn = DBUtil.getConnection();
          Statement stmt = conn.createStatement();  
          ResultSet rs = stmt.executeQuery("select * from users");  
          while (rs.next()) {  
              System.out.println(rs.getInt(1) + "  " + rs.getString(2));  
          }  
           DBUtil.release(rs,stmt,conn);
      }  
  }  
  ```

  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：1   wangwu

​                  3    tom

​                  5    xiaohong

​       题目解析：略



- 题目说明： 有一个users表，表中id、username、password三个字段，且有以下几组数据：

  1     张三       1234

  2     李四	      4567

  3     王五       7896

  当输入的用户名为张三，密码为1234时，结果是？

  当输入的用户名为小赵，密码为4569时，结果为？

  请写出运行结果

  ```java
  import java.sql.*;
  import java.util.*;
  public class Login {
      public static void main(String[] args) throws Exception{
          Connection conn = DBUtil.getConnection();
          String sql="select * from users where username=? and password=?";     
          PreparedStatement ps=conn.prepareStatement(sql); 
          //输入用户名和密码
          Scanner sc=new Scanner(System.in);
          System.out.println("请输入用户名:");
          String username=sc.nextLine();
          System.out.println("请输入密码:");
          String password=sc.nextLine();                
          ps.setString(1, username);                                     
          ps.setString(2, password);
          ResultSet rs=ps.executeQuery();                       
          if(rs.next()){    
              System.out.println("登录成功，"+rs.getString("username")+"，欢迎你");
          }
          else{
              System.out.println("登录失败，用户名或密码输入错误");
          }   
          DBUtil.release(rs,ps,conn);
      }
  ```

  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：

​		第一个运行结果：                                                   第二个运行结果：

​		请输入用户名：                                                       请输入用户名：

​		张三                                                                          小赵

​		请输入密码： 							  请输入密码：

​		1234									  4569

​		登录成功，张三，欢迎你					  登录失败，用户名或密码输入错误

​       题目解析：



- 题目说明：有一个users表，表中id、username、password三个字段，且有以下几组数据：

  1     张三       1234

  2     李四	      4567

  3     王五       7896

  运行结果是？

  ```java
  import java.sql.*;
  import java.util.*;
  public class UpdatePwd {
      public static void main(String[] args) throws Exception{
          Connection conn = DBUtil.getConnection();
          String sql="update users set password='3719' where username='王五'";     
          PreparedStatement ps=conn.prepareStatement(sql);                                 
          if(ps.executeUpdate()>0){    
              System.out.println("密码修改成功");
          }
          else{
              System.out.println("密码修改失败");
          }   
          DBUtil.release(null,ps,conn);
      }
  ```

  

​       题目难度：简单

​       题目考核知识点：Java与数据库

​       答案：在数据库中王五的密码被修改为了3719，并在控制台上打印了密码修改成功

​       题目解析：



## 四、简答

### 基本概念解释





### 程序题改错







## 五、编程题

- ​题目说明： 

​       题目难度：

​       题目考核知识点：Java与数据库

​       答案：

```java
  
```

​    题目解析：